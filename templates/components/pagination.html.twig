{#
  Pagination component
  Parameters:
  - current_page: current page number
  - total_pages: total number of pages
  - route_name: route name for links
  - route_params: additional route parameters (optional)
#}

{% if total_pages > 1 %}
    <nav class="pagination">
        <div class="pagination-prev">
            {% if current_page > 1 %}
                <a href="{{ path(route_name, route_params|default({})|merge({page: current_page - 1})) }}" class="pagination-link pagination-link-prev">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                    Précédent
                </a>
            {% endif %}
        </div>

        <div class="pagination-pages">
            {% set start_page = max(1, current_page - 2) %}
            {% set end_page = min(total_pages, current_page + 2) %}

            {# Always show first page #}
            {% if start_page > 1 %}
                <a href="{{ path(route_name, route_params|default({})|merge({page: 1})) }}" class="pagination-page">
                    1
                </a>
                {% if start_page > 2 %}
                    <span class="pagination-ellipsis">
                        ...
                    </span>
                {% endif %}
            {% endif %}

            {# Show page range #}
            {% for page in start_page..end_page %}
                {% if page == current_page %}
                    <span class="pagination-page pagination-page-active">
                        {{ page }}
                    </span>
                {% else %}
                    <a href="{{ path(route_name, route_params|default({})|merge({page: page})) }}" class="pagination-page">
                        {{ page }}
                    </a>
                {% endif %}
            {% endfor %}

            {# Always show last page #}
            {% if end_page < total_pages %}
                {% if end_page < total_pages - 1 %}
                    <span class="pagination-ellipsis">
                        ...
                    </span>
                {% endif %}
                <a href="{{ path(route_name, route_params|default({})|merge({page: total_pages})) }}" class="pagination-page">
                    {{ total_pages }}
                </a>
            {% endif %}
        </div>

        <div class="pagination-next">
            {% if current_page < total_pages %}
                <a href="{{ path(route_name, route_params|default({})|merge({page: current_page + 1})) }}" class="pagination-link pagination-link-next">
                    Suivant
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </a>
            {% endif %}
        </div>
    </nav>

    <div class="pagination-info">
        Page {{ current_page }} sur {{ total_pages }}
        {% if total_articles is defined %}
            ({{ total_articles }} article{{ total_articles > 1 ? 's' : '' }} au total)
        {% endif %}
    </div>
{% endif %}
