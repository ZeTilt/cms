{% extends 'plongee_base.html.twig' %}

{% block title %}{{ article.title }} - Club Subaquatique des Vénètes{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('assets/carousel' ~ (app.environment == 'prod' ? '.min' : '') ~ '.css') }}">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('assets/carousel' ~ (app.environment == 'prod' ? '.min' : '') ~ '.js') }}" defer></script>
    <script src="{{ asset('assets/youtube-thumbnails' ~ (app.environment == 'prod' ? '.min' : '') ~ '.js') }}" defer></script>
{% endblock %}

{% block body %}
<div class="article-detail">
    <div class="article-detail-container">
        <div class="article-detail-back">
            <a href="{{ path('blog_index') }}" class="article-detail-back-link">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Retour aux actualités
            </a>
        </div>

        {% if article.category %}
            <p class="article-detail-category">
                <a href="{{ path('blog_category', {category: article.category}) }}">
                    {{ article.category }}
                </a>
            </p>
        {% endif %}

        <h1 class="article-detail-title">
            {{ article.title }}
        </h1>

        {% if article.excerpt %}
            <p class="article-detail-excerpt">
                {{ article.excerpt }}
            </p>
        {% endif %}

        <div class="article-detail-meta">
            <time datetime="{{ article.publishedAt|date('Y-m-d') }}" class="article-detail-date">
                {{ article.publishedAt|date('F j, Y') }}
            </time>
            <div class="article-detail-author">
                Par {{ article.author.firstName }} {{ article.author.lastName }}
            </div>
        </div>

        {% if article.tags and article.tags|length > 0 %}
            <div class="article-detail-tags">
                {% for tag in article.tags %}
                    <a href="{{ path('blog_tag', {tag: tag}) }}" class="article-detail-tag">
                        #{{ tag }}
                    </a>
                {% endfor %}
            </div>
        {% endif %}

        {% if article.featuredImage %}
            <figure class="article-detail-figure">
                <img src="{{ article.featuredImage|webp }}" alt="{{ article.title }}" loading="lazy">
            </figure>
        {% endif %}

        <div class="article-detail-content article-content">
            {{ article.content|youtube_thumbnails|lazy_images }}
        </div>

        <div class="article-detail-footer">
            <div class="article-detail-footer-inner">
                <div class="article-detail-author-info">
                    <div class="article-detail-avatar">
                        <span>
                            {{ article.author.fullName|slice(0, 2)|upper }}
                        </span>
                    </div>
                    <div class="article-detail-author-details">
                        <p class="article-detail-author-name">
                            {{ article.author.firstName }} {{ article.author.lastName }}
                        </p>
                        <p class="article-detail-author-role">
                            Auteur
                        </p>
                    </div>
                </div>
                <div class="article-detail-publish-date">
                    Publié le {{ article.publishedAt|date('F j, Y') }}
                </div>
            </div>
        </div>

        <div class="article-detail-actions">
            <a href="{{ path('blog_index') }}" class="article-detail-btn">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Retour au blog
            </a>
        </div>
    </div>
</div>
{% endblock %}
